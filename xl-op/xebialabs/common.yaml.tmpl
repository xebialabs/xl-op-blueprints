{{- if eq .K8sSetup "DockerDesktopK8s"}}
apiVersion: xl-deploy/v1
kind: Infrastructure
spec:
  - directory: Infrastructure/DIGITALAI
    children:
      - name: K8s-MASTER-LOCAL
        type: k8s.Master
        apiServerURL: !value K8sLocalApiServerURL
        skipTLS: true
        {{- if .UseKubeconfig }}
        tlsCert: !value K8sClientCert
        tlsPrivateKey: !value K8sClientKey
        {{- else}}
        tlsCert: !value K8sClientCertFile
        tlsPrivateKey: !value K8sClientKeyFile
        {{- end}}
{{- else if eq .K8sSetup "AwsEKS"}}
apiVersion: xl-deploy/v1
kind: Infrastructure
spec:
  - directory: Infrastructure/DIGITALAI
    children:
      - name: EKS-MASTER
        type: k8s.Master
        apiServerURL: !value K8sApiServerURL
        skipTLS: true
        isEKS: true
        clusterName: !value EksClusterName
        accessKey: !value AWSAccessKey
        accessSecret: !value AWSAccessSecret
{{- else if eq .K8sSetup "Openshift"}}
apiVersion: xl-deploy/v1
kind: Infrastructure
spec:
  - directory: Infrastructure/DIGITALAI
    children:
      - name: K8s-MASTER
        type: openshift.Server
        serverUrl: !value K8sApiServerURL
        {{- if ne .K8sToken ""}}
        openshiftToken: !value K8sToken
          {{- else if eq .K8sClientCertFile "" }}
        tlsCert: !value K8sClientCert
        tlsPrivateKey: !value K8sClientKey
          {{- else}}
        tlsCert: !value K8sClientCertFile
        tlsPrivateKey: !value K8sClientKeyFile
          {{- end}}
        verifyCertificates: false
        children:
        - name: default
          type: openshift.Project
          projectName: {{ .Namespace }}
{{- else}}
apiVersion: xl-deploy/v1
kind: Infrastructure
spec:
  - directory: Infrastructure/DIGITALAI
    children:
      - name: K8s-MASTER
        type: k8s.Master
        apiServerURL: !value K8sApiServerURL
        skipTLS: true
        {{- if eq .K8sToken ""}}
          {{- if eq .K8sClientCertFile "" }}
        tlsCert: !value K8sClientCert
        tlsPrivateKey: !value K8sClientKey
          {{- else}}
        tlsCert: !value K8sClientCertFile
        tlsPrivateKey: !value K8sClientKeyFile
          {{- end}}
        {{- else}}
        token: !value K8sToken
        {{- end}}
{{- end}}
